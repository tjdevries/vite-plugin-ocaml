// Generated by Melange

import * as Caml_js_exceptions from "melange.js/caml_js_exceptions.js";
import * as Curry from "melange.js/curry.js";

function create(param) {
  return {
          contents: false
        };
}

function lock(t) {
  t.contents = true;
}

function try_lock(t) {
  if (t.contents) {
    return false;
  } else {
    t.contents = true;
    return true;
  }
}

function unlock(t) {
  t.contents = false;
}

function protect(m, f) {
  m.contents = true;
  let x;
  try {
    x = Curry._1(f, undefined);
  }
  catch (e){
    m.contents = false;
    throw new Caml_js_exceptions.MelangeError(e.MEL_EXN_ID, e);
  }
  m.contents = false;
  return x;
}

export {
  create ,
  lock ,
  try_lock ,
  unlock ,
  protect ,
}
/* No side effect */
